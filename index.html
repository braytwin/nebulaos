<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="NebulaOS - The first PhoneVM on the Laptop!">
    <title>NebulaOS - Ultimate Edition</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=League+Spartan:wght@400;500;600;700;800;900&family=Inter:wght@700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --color-black: #000000;
            --color-dark-grey: #1a1a1a;
            --color-medium-grey: #2a2a2a;
            --color-white: #ffffff;
            --color-baby-blue: #89CFF0;
            --gradient-primary: linear-gradient(135deg, #000000 0%, #2a2a2a 50%, #1a1a1a 100%);
            --gradient-text: linear-gradient(135deg, #ffffff 0%, #89CFF0 100%);
            --gradient-card: linear-gradient(145deg, #1a1a1a 0%, #2a2a2a 100%);
            --font-title: 'League Spartan', sans-serif;
            --font-body: 'Inter', sans-serif;
            --spacing-xs: 0.5rem;
            --spacing-sm: 1rem;
            --spacing-md: 2rem;
            --spacing-lg: 3rem;
            --spacing-xl: 4rem;
            --transition-smooth: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-fast: all 0.2s ease;
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.3);
            --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.4);
            --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.5);
            --shadow-glow: 0 0 20px rgba(137, 207, 240, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
            overflow: hidden;
        }

        body {
            font-family: var(--font-body);
            background: var(--gradient-primary);
            color: var(--color-white);
            position: relative;
        }

        #particles-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: var(--color-white);
            border-radius: 50%;
            opacity: 0.6;
            animation: moveParticle linear infinite;
        }

        @keyframes moveParticle {
            0% { transform: translateX(0) translateY(0); opacity: 0; }
            10% { opacity: 0.6; }
            90% { opacity: 0.6; }
            100% { transform: translateX(100vw) translateY(-50px); opacity: 0; }
        }

        #app {
            position: relative;
            z-index: 1;
            height: 100vh;
            overflow: hidden;
        }

        .page {
            display: none;
            opacity: 0;
            height: 100vh;
            overflow: hidden;
        }

        .page.active {
            display: flex;
            opacity: 1;
            animation: fadeIn 0.6s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        #homepage {
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .main-title {
            font-family: var(--font-title);
            font-size: clamp(4rem, 10vw, 8rem);
            font-weight: 900;
            letter-spacing: -0.02em;
            margin-bottom: var(--spacing-md);
            background: var(--gradient-text);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: titleGlow 3s ease-in-out infinite;
        }

        @keyframes titleGlow {
            0%, 100% { filter: drop-shadow(0 0 10px rgba(137, 207, 240, 0.3)); }
            50% { filter: drop-shadow(0 0 30px rgba(137, 207, 240, 0.8)); }
        }

        .subtitle {
            font-family: var(--font-title);
            font-size: clamp(1.5rem, 3vw, 2.5rem);
            font-weight: 600;
            margin-bottom: var(--spacing-xl);
            color: var(--color-baby-blue);
        }

        .explore-button {
            font-family: var(--font-title);
            font-size: 1.5rem;
            font-weight: 700;
            padding: 1.5rem 4rem;
            background: var(--gradient-card);
            color: var(--color-white);
            border: 3px solid var(--color-baby-blue);
            border-radius: 50px;
            cursor: pointer;
            transition: var(--transition-smooth);
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-sm);
            box-shadow: var(--shadow-lg);
            position: relative;
            overflow: hidden;
        }

        .explore-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(137, 207, 240, 0.4), transparent);
            transition: var(--transition-smooth);
        }

        .explore-button:hover {
            transform: translateY(-5px) scale(1.1);
            box-shadow: var(--shadow-lg), var(--shadow-glow), 0 0 40px rgba(137, 207, 240, 0.5);
            border-color: var(--color-white);
        }

        .explore-button:hover::before {
            left: 100%;
        }

        .explore-button i {
            transition: var(--transition-fast);
        }

        .explore-button:hover i {
            transform: translateX(10px);
        }

        .back-button {
            position: fixed;
            top: var(--spacing-md);
            left: var(--spacing-md);
            font-family: var(--font-body);
            font-weight: 700;
            padding: 0.75rem 1.5rem;
            background: var(--gradient-card);
            color: var(--color-white);
            border: 1px solid rgba(137, 207, 240, 0.3);
            border-radius: 50px;
            cursor: pointer;
            transition: var(--transition-smooth);
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
            box-shadow: var(--shadow-sm);
            z-index: 1000;
        }

        .back-button:hover {
            transform: translateX(-5px);
            box-shadow: var(--shadow-md);
            border-color: var(--color-baby-blue);
        }

        #phone-selection {
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: var(--spacing-xl);
            overflow-y: auto;
        }

        .page-title {
            font-family: var(--font-title);
            font-size: clamp(2.5rem, 5vw, 4rem);
            font-weight: 800;
            text-align: center;
            margin-bottom: var(--spacing-sm);
            background: var(--gradient-text);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .page-subtitle {
            font-family: var(--font-body);
            font-size: clamp(1rem, 2vw, 1.5rem);
            text-align: center;
            margin-bottom: var(--spacing-lg);
            opacity: 0.8;
        }

        .phone-categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--spacing-md);
            max-width: 1400px;
            width: 100%;
        }

        .phone-category {
            background: var(--gradient-card);
            padding: var(--spacing-lg);
            border-radius: 30px;
            border: 1px solid rgba(137, 207, 240, 0.2);
            box-shadow: var(--shadow-md);
            transition: var(--transition-smooth);
        }

        .phone-category:hover {
            border-color: var(--color-baby-blue);
            box-shadow: var(--shadow-lg);
            transform: translateY(-5px);
        }

        .category-header {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-md);
            padding-bottom: var(--spacing-md);
            border-bottom: 2px solid rgba(137, 207, 240, 0.2);
        }

        .category-header i {
            font-size: 2.5rem;
            color: var(--color-baby-blue);
        }

        .category-header h3 {
            font-family: var(--font-title);
            font-size: 2rem;
            font-weight: 700;
        }

        .phone-models {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-sm);
        }

        .phone-model {
            background: linear-gradient(145deg, #0a0a0a 0%, #1a1a1a 100%);
            padding: var(--spacing-md);
            border-radius: 20px;
            border: 2px solid rgba(137, 207, 240, 0.1);
            cursor: pointer;
            transition: var(--transition-smooth);
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
        }

        .phone-model:hover {
            transform: translateX(10px);
            border-color: var(--color-baby-blue);
            box-shadow: var(--shadow-lg), var(--shadow-glow);
        }

        .phone-icon {
            font-size: 3rem;
            color: var(--color-baby-blue);
            transition: var(--transition-smooth);
        }

        .phone-model:hover .phone-icon {
            transform: scale(1.2) rotate(-10deg);
        }

        .phone-info h4 {
            font-family: var(--font-title);
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
        }

        .phone-info p {
            font-family: var(--font-body);
            opacity: 0.7;
            font-size: 0.9rem;
        }

        #phone-vm {
            justify-content: center;
            align-items: center;
            padding: var(--spacing-md);
        }

        #phone-container {
            width: 100%;
            max-width: 420px;
            height: 90vh;
            max-height: 900px;
            background: var(--gradient-card);
            border-radius: 45px;
            box-shadow: var(--shadow-lg), 0 0 50px rgba(137, 207, 240, 0.2);
            border: 4px solid rgba(137, 207, 240, 0.4);
            position: relative;
            overflow: hidden;
        }

        .phone-frame {
            width: 100%;
            height: 100%;
            position: relative;
            border-radius: 45px;
            overflow: hidden;
        }

        .phone-screen {
            width: 100%;
            height: 100%;
            background: #000;
            position: relative;
            overflow: hidden;
        }

        .status-bar {
            position: absolute;
            top: 0;
            width: 100%;
            height: 44px;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(20px);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            z-index: 100;
            font-size: 0.85rem;
        }

        .status-left, .status-right {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .time {
            font-weight: 600;
        }

        .notch {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 150px;
            height: 30px;
            background: #000;
            border-radius: 0 0 20px 20px;
            z-index: 101;
        }

        .notch.liquid-glass {
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.95) 0%, rgba(26, 26, 26, 0.95) 100%);
            backdrop-filter: blur(10px);
            box-shadow: inset 0 2px 10px rgba(137, 207, 240, 0.3), 0 4px 10px rgba(0, 0, 0, 0.5);
        }

        .home-screen {
            position: absolute;
            top: 44px;
            left: 0;
            right: 0;
            bottom: 100px;
            padding: 20px;
            overflow-y: auto;
            overflow-x: hidden;
        }

        .app-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            padding: 10px;
        }

        .app-icon {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            transition: var(--transition-smooth);
        }

        .app-icon:hover {
            transform: scale(1.15);
        }

        .app-icon:active {
            transform: scale(0.9);
        }

        .app-icon-bg {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #2a2a2a 0%, #1a1a1a 100%);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            color: var(--color-baby-blue);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3), inset 0 1px 2px rgba(255, 255, 255, 0.1);
            transition: var(--transition-smooth);
        }

        .app-icon:hover .app-icon-bg {
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.4), 0 0 20px rgba(137, 207, 240, 0.4);
        }

        .app-name {
            font-size: 0.7rem;
            font-family: var(--font-body);
            text-align: center;
            max-width: 70px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .dock {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 100px;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(30px);
            border-top: 1px solid rgba(137, 207, 240, 0.1);
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            padding: 0 20px;
        }

        .dock .app-icon-bg {
            width: 65px;
            height: 65px;
            font-size: 2rem;
        }

        .app-icon.android .app-icon-bg {
            border-radius: 50%;
        }

        .app-view {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            z-index: 200;
            display: flex;
            flex-direction: column;
            animation: slideInUp 0.3s ease-out;
        }

        @keyframes slideInUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }

        .app-header {
            height: 50px;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(20px);
            display: flex;
            align-items: center;
            padding: 0 15px;
            gap: 15px;
            border-bottom: 1px solid rgba(137, 207, 240, 0.2);
            flex-shrink: 0;
        }

        .close-app {
            width: 35px;
            height: 35px;
            background: rgba(137, 207, 240, 0.2);
            border: none;
            border-radius: 50%;
            color: var(--color-white);
            font-size: 1.2rem;
            cursor: pointer;
            transition: var(--transition-fast);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-app:hover {
            background: var(--color-baby-blue);
            color: #000;
            transform: rotate(90deg);
        }

        .app-url {
            font-size: 0.85rem;
            opacity: 0.7;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            flex: 1;
        }

        .app-view iframe {
            flex: 1;
            width: 100%;
            height: calc(100% - 50px);
            border: none;
        }

        .settings-container, .appstore-container {
            position: absolute;
            top: 44px;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #000000 0%, #1a1a1a 100%);
            overflow-y: auto;
            padding: 20px;
        }

        .settings-header, .appstore-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(137, 207, 240, 0.2);
        }

        .settings-header i, .appstore-header i {
            font-size: 2rem;
            color: var(--color-baby-blue);
        }

        .settings-header h2, .appstore-header h2 {
            font-family: var(--font-title);
            font-size: 1.8rem;
            font-weight: 700;
        }

        .settings-section, .appstore-section {
            margin-bottom: 30px;
        }

        .section-title {
            font-family: var(--font-title);
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--color-baby-blue);
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .settings-item {
            background: rgba(26, 26, 26, 0.8);
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid rgba(137, 207, 240, 0.1);
            transition: var(--transition-fast);
            cursor: pointer;
        }

        .settings-item:hover {
            background: rgba(42, 42, 42, 0.9);
            border-color: var(--color-baby-blue);
            transform: translateX(5px);
        }

        .settings-item-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .settings-item-left i {
            font-size: 1.5rem;
            color: var(--color-baby-blue);
            width: 30px;
            text-align: center;
        }

        .settings-item-info h4 {
            font-family: var(--font-body);
            font-size: 1rem;
            font-weight: 700;
            margin-bottom: 3px;
        }

        .settings-item-info p {
            font-size: 0.8rem;
            opacity: 0.7;
        }

        .switch {
            position: relative;
            width: 50px;
            height: 26px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(137, 207, 240, 0.2);
            transition: var(--transition-fast);
            border-radius: 50px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 3px;
            bottom: 3px;
            background: var(--color-white);
            transition: var(--transition-fast);
            border-radius: 50%;
        }

        input:checked + .slider {
            background: var(--color-baby-blue);
        }

        input:checked + .slider:before {
            transform: translateX(24px);
        }

        .app-store-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }

        .store-app {
            background: rgba(26, 26, 26, 0.8);
            padding: 15px;
            border-radius: 15px;
            border: 1px solid rgba(137, 207, 240, 0.1);
            cursor: pointer;
            transition: var(--transition-smooth);
            text-align: center;
        }

        .store-app:hover {
            border-color: var(--color-baby-blue);
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(137, 207, 240, 0.3);
        }

        .store-app-icon {
            font-size: 3rem;
            color: var(--color-baby-blue);
            margin-bottom: 10px;
        }

        .store-app-name {
            font-family: var(--font-body);
            font-size: 0.9rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .store-app-category {
            font-size: 0.7rem;
            opacity: 0.6;
        }

        .home-screen::-webkit-scrollbar, .settings-container::-webkit-scrollbar, .appstore-container::-webkit-scrollbar {
            width: 5px;
        }

        .home-screen::-webkit-scrollbar-track, .settings-container::-webkit-scrollbar-track, .appstore-container::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.3);
        }

        .home-screen::-webkit-scrollbar-thumb, .settings-container::-webkit-scrollbar-thumb, .appstore-container::-webkit-scrollbar-thumb {
            background: rgba(137, 207, 240, 0.5);
            border-radius: 10px;
        }

        @media (max-width: 768px) {
            #phone-container {
                max-width: 100%;
                height: 85vh;
            }

            .app-grid {
                grid-template-columns: repeat(4, 1fr);
                gap: 15px;
            }

            .app-store-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
<script src="https://sites.super.myninja.ai/_assets/ninja-daytona-script.js"></script>
</head>
<body>
    <div id="particles-container"></div>
    
    <div id="app">
        <section id="homepage" class="page active">
            <h1 class="main-title">NebulaOS</h1>
            <p class="subtitle">The first PhoneVM on the Laptop!</p>
            <button id="explore-btn" class="explore-button">
                <span>Explore</span>
                <i class="fas fa-arrow-right"></i>
            </button>
        </section>
        
        <section id="phone-selection" class="page">
            <button class="back-button" onclick="navigateToHome()">
                <i class="fas fa-arrow-left"></i>
                <span>Back</span>
            </button>
            
            <h2 class="page-title">Choose Your Device</h2>
            <p class="page-subtitle">Select a phone model to start your virtual experience</p>
            
            <div class="phone-categories">
                <div class="phone-category">
                    <div class="category-header">
                        <i class="fab fa-apple"></i>
                        <h3>iPhone</h3>
                    </div>
                    <div class="phone-models">
                        <div class="phone-model" data-phone="iphone16">
                            <div class="phone-icon">
                                <i class="fas fa-mobile-screen-button"></i>
                            </div>
                            <div class="phone-info">
                                <h4>iPhone 16</h4>
                                <p>Latest with liquid glass • A18 Chip • 48MP Camera</p>
                            </div>
                        </div>
                        <div class="phone-model" data-phone="iphone17">
                            <div class="phone-icon">
                                <i class="fas fa-mobile-screen-button"></i>
                            </div>
                            <div class="phone-info">
                                <h4>iPhone 17 Pro</h4>
                                <p>Pro Max with liquid glass • A19 Pro • 120Hz ProMotion</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="phone-category">
                    <div class="category-header">
                        <i class="fab fa-android"></i>
                        <h3>Android</h3>
                    </div>
                    <div class="phone-models">
                        <div class="phone-model" data-phone="pixel">
                            <div class="phone-icon">
                                <i class="fab fa-google"></i>
                            </div>
                            <div class="phone-info">
                                <h4>Google Pixel 9 Pro</h4>
                                <p>Pure Android • Tensor G4 • AI Features</p>
                            </div>
                        </div>
                        <div class="phone-model" data-phone="galaxy">
                            <div class="phone-icon">
                                <i class="fas fa-mobile-alt"></i>
                            </div>
                            <div class="phone-info">
                                <h4>Samsung Galaxy S24 Ultra</h4>
                                <p>One UI 6.1 • Snapdragon 8 Gen 3 • S Pen</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="phone-category">
                    <div class="category-header">
                        <i class="fas fa-mobile-alt"></i>
                        <h3>Nokia</h3>
                    </div>
                    <div class="phone-models">
                        <div class="phone-model" data-phone="nokia">
                            <div class="phone-icon">
                                <i class="fas fa-mobile"></i>
                            </div>
                            <div class="phone-info">
                                <h4>Nokia 3310 Reborn</h4>
                                <p>Classic design • Indestructible • Snake Game</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="phone-vm" class="page">
            <button class="back-button" onclick="navigateToSelection()">
                <i class="fas fa-arrow-left"></i>
                <span>Back</span>
            </button>
            
            <div id="phone-container"></div>
        </section>
    </div>
    
    <script>
        const PROXY_BASE = '/scram/service/';
        
        function getProxyUrl(url) {
            return PROXY_BASE + encodeURIComponent(url);
        }

        class ParticleSystem {
            constructor() {
                this.container = document.getElementById('particles-container');
                this.particleCount = 50;
                this.init();
            }

            init() {
                for (let i = 0; i < this.particleCount; i++) {
                    this.createParticle();
                }
            }

            createParticle() {
                const particle = document.createElement('div');
                particle.className = 'particle';
                const startY = Math.random() * window.innerHeight;
                const size = Math.random() * 3 + 2;
                const duration = Math.random() * 15 + 10;
                const delay = Math.random() * 5;
                
                particle.style.cssText = `
                    left: -10px;
                    top: ${startY}px;
                    width: ${size}px;
                    height: ${size}px;
                    animation-duration: ${duration}s;
                    animation-delay: ${delay}s;
                `;
                
                this.container.appendChild(particle);
                
                setTimeout(() => {
                    particle.remove();
                    this.createParticle();
                }, (duration + delay) * 1000);
            }
        }

        class NavigationManager {
            constructor() {
                this.currentPage = 'homepage';
                this.pages = {
                    homepage: document.getElementById('homepage'),
                    phoneSelection: document.getElementById('phone-selection'),
                    phoneVM: document.getElementById('phone-vm')
                };
                this.init();
            }

            init() {
                document.getElementById('explore-btn').addEventListener('click', () => {
                    this.navigateTo('phoneSelection');
                });

                document.querySelectorAll('.phone-model').forEach(model => {
                    model.addEventListener('click', () => {
                        const phoneType = model.getAttribute('data-phone');
                        this.loadPhone(phoneType);
                    });
                });

                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape') this.goBack();
                });
            }

            navigateTo(pageName) {
                Object.values(this.pages).forEach(page => page.classList.remove('active'));
                this.pages[pageName].classList.add('active');
                this.currentPage = pageName;
            }

            loadPhone(phoneType) {
                window.phoneLoader.loadPhone(phoneType);
                this.navigateTo('phoneVM');
            }

            goBack() {
                if (this.currentPage === 'phoneVM') {
                    this.navigateTo('phoneSelection');
                } else if (this.currentPage === 'phoneSelection') {
                    this.navigateTo('homepage');
                }
            }
        }

        class PhoneLoader {
            constructor() {
                this.container = document.getElementById('phone-container');
                this.currentPhone = null;
                this.apps = this.getAllApps();
            }

            getAllApps() {
                return {
                    social: [
                        { name: 'TikTok', icon: 'fab fa-tiktok', url: 'https://www.tiktok.com', category: 'Social' },
                        { name: 'Instagram', icon: 'fab fa-instagram', url: 'https://www.instagram.com', category: 'Social' },
                        { name: 'Facebook', icon: 'fab fa-facebook', url: 'https://www.facebook.com', category: 'Social' },
                        { name: 'WhatsApp', icon: 'fab fa-whatsapp', url: 'https://web.whatsapp.com', category: 'Social' },
                        { name: 'YouTube', icon: 'fab fa-youtube', url: 'https://www.youtube.com', category: 'Social' },
                        { name: 'Snapchat', icon: 'fab fa-snapchat', url: 'https://www.snapchat.com', category: 'Social' },
                        { name: 'Twitter', icon: 'fab fa-twitter', url: 'https://twitter.com', category: 'Social' },
                        { name: 'Telegram', icon: 'fab fa-telegram', url: 'https://web.telegram.org', category: 'Social' },
                        { name: 'Discord', icon: 'fab fa-discord', url: 'https://discord.com/app', category: 'Social' },
                        { name: 'LinkedIn', icon: 'fab fa-linkedin', url: 'https://www.linkedin.com', category: 'Social' },
                        { name: 'Reddit', icon: 'fab fa-reddit', url: 'https://www.reddit.com', category: 'Social' },
                        { name: 'Pinterest', icon: 'fab fa-pinterest', url: 'https://www.pinterest.com', category: 'Social' }
                    ],
                    entertainment: [
                        { name: 'Netflix', icon: 'fas fa-film', url: 'https://www.netflix.com', category: 'Entertainment' },
                        { name: 'Disney+', icon: 'fas fa-tv', url: 'https://www.disneyplus.com', category: 'Entertainment' },
                        { name: 'Spotify', icon: 'fab fa-spotify', url: 'https://open.spotify.com', category: 'Entertainment' },
                        { name: 'Apple Music', icon: 'fas fa-music', url: 'https://music.apple.com', category: 'Entertainment' },
                        { name: 'Twitch', icon: 'fab fa-twitch', url: 'https://www.twitch.tv', category: 'Entertainment' },
                        { name: 'SoundCloud', icon: 'fab fa-soundcloud', url: 'https://soundcloud.com', category: 'Entertainment' },
                        { name: 'Hulu', icon: 'fas fa-play-circle', url: 'https://www.hulu.com', category: 'Entertainment' },
                        { name: 'HBO Max', icon: 'fas fa-video', url: 'https://www.hbomax.com', category: 'Entertainment' },
                        { name: 'Prime Video', icon: 'fab fa-amazon', url: 'https://www.primevideo.com', category: 'Entertainment' }
                    ],
                    productivity: [
                        { name: 'Gmail', icon: 'fas fa-envelope', url: 'https://mail.google.com', category: 'Productivity' },
                        { name: 'Google Drive', icon: 'fab fa-google-drive', url: 'https://drive.google.com', category: 'Productivity' },
                        { name: 'Dropbox', icon: 'fab fa-dropbox', url: 'https://www.dropbox.com', category: 'Productivity' },
                        { name: 'Notion', icon: 'fas fa-book', url: 'https://www.notion.so', category: 'Productivity' },
                        { name: 'Trello', icon: 'fab fa-trello', url: 'https://trello.com', category: 'Productivity' },
                        { name: 'Slack', icon: 'fab fa-slack', url: 'https://slack.com', category: 'Productivity' },
                        { name: 'Zoom', icon: 'fas fa-video', url: 'https://zoom.us', category: 'Productivity' },
                        { name: 'Microsoft Teams', icon: 'fab fa-microsoft', url: 'https://teams.microsoft.com', category: 'Productivity' },
                        { name: 'Evernote', icon: 'fas fa-sticky-note', url: 'https://www.evernote.com', category: 'Productivity' }
                    ],
                    shopping: [
                        { name: 'Amazon', icon: 'fab fa-amazon', url: 'https://www.amazon.com', category: 'Shopping' },
                        { name: 'eBay', icon: 'fab fa-ebay', url: 'https://www.ebay.com', category: 'Shopping' },
                        { name: 'Etsy', icon: 'fab fa-etsy', url: 'https://www.etsy.com', category: 'Shopping' },
                        { name: 'Walmart', icon: 'fas fa-shopping-cart', url: 'https://www.walmart.com', category: 'Shopping' },
                        { name: 'Target', icon: 'fas fa-bullseye', url: 'https://www.target.com', category: 'Shopping' },
                        { name: 'AliExpress', icon: 'fas fa-shopping-bag', url: 'https://www.aliexpress.com', category: 'Shopping' }
                    ],
                    games: [
                        { name: 'Subway Surfers', icon: 'fas fa-gamepad', url: 'https://poki.com/en/g/subway-surfers', category: 'Games' },
                        { name: 'Candy Crush', icon: 'fas fa-candy-cane', url: 'https://www.king.com/game/candycrush', category: 'Games' },
                        { name: 'Among Us', icon: 'fas fa-user-astronaut', url: 'https://www.innersloth.com/games/among-us/', category: 'Games' },
                        { name: 'Roblox', icon: 'fas fa-cube', url: 'https://www.roblox.com', category: 'Games' },
                        { name: 'Minecraft', icon: 'fas fa-cubes', url: 'https://www.minecraft.net', category: 'Games' },
                        { name: 'Fortnite', icon: 'fas fa-crosshairs', url: 'https://www.fortnite.com', category: 'Games' },
                        { name: 'PUBG', icon: 'fas fa-gun', url: 'https://www.pubgmobile.com', category: 'Games' },
                        { name: 'Call of Duty', icon: 'fas fa-skull-crossbones', url: 'https://www.callofduty.com', category: 'Games' },
                        { name: 'Genshin Impact', icon: 'fas fa-dragon', url: 'https://genshin.hoyoverse.com', category: 'Games' },
                        { name: 'Pokemon GO', icon: 'fas fa-paw', url: 'https://pokemongolive.com', category: 'Games' }
                    ],
                    utilities: [
                        { name: 'Uber', icon: 'fab fa-uber', url: 'https://www.uber.com', category: 'Utilities' },
                        { name: 'Lyft', icon: 'fas fa-car', url: 'https://www.lyft.com', category: 'Utilities' },
                        { name: 'DoorDash', icon: 'fas fa-utensils', url: 'https://www.doordash.com', category: 'Utilities' },
                        { name: 'Uber Eats', icon: 'fas fa-hamburger', url: 'https://www.ubereats.com', category: 'Utilities' },
                        { name: 'Venmo', icon: 'fas fa-dollar-sign', url: 'https://venmo.com', category: 'Utilities' },
                        { name: 'PayPal', icon: 'fab fa-paypal', url: 'https://www.paypal.com', category: 'Utilities' },
                        { name: 'Cash App', icon: 'fas fa-money-bill-wave', url: 'https://cash.app', category: 'Utilities' },
                        { name: 'Shazam', icon: 'fas fa-music', url: 'https://www.shazam.com', category: 'Utilities' }
                    ],
                    news: [
                        { name: 'CNN', icon: 'fas fa-newspaper', url: 'https://www.cnn.com', category: 'News' },
                        { name: 'BBC', icon: 'fas fa-broadcast-tower', url: 'https://www.bbc.com', category: 'News' },
                        { name: 'NY Times', icon: 'fas fa-file-alt', url: 'https://www.nytimes.com', category: 'News' },
                        { name: 'Reuters', icon: 'fas fa-globe', url: 'https://www.reuters.com', category: 'News' }
                    ],
                    dating: [
                        { name: 'Tinder', icon: 'fas fa-fire', url: 'https://tinder.com', category: 'Dating' },
                        { name: 'Bumble', icon: 'fas fa-heart', url: 'https://bumble.com', category: 'Dating' },
                        { name: 'Hinge', icon: 'fas fa-user-friends', url: 'https://hinge.co', category: 'Dating' }
                    ],
                    education: [
                        { name: 'Duolingo', icon: 'fas fa-language', url: 'https://www.duolingo.com', category: 'Education' },
                        { name: 'Khan Academy', icon: 'fas fa-graduation-cap', url: 'https://www.khanacademy.org', category: 'Education' },
                        { name: 'Coursera', icon: 'fas fa-book-open', url: 'https://www.coursera.org', category: 'Education' },
                        { name: 'Udemy', icon: 'fas fa-chalkboard-teacher', url: 'https://www.udemy.com', category: 'Education' }
                    ]
                };
            }

            loadPhone(phoneType) {
                this.currentPhone = phoneType;
                this.container.innerHTML = '';
                
                const phoneFrame = document.createElement('div');
                phoneFrame.className = 'phone-frame';
                
                const phoneScreen = document.createElement('div');
                phoneScreen.className = 'phone-screen';
                
                const statusBar = this.createStatusBar(phoneType);
                const homeScreen = this.createHomeScreen(phoneType);
                const dock = this.createDock(phoneType);
                
                phoneScreen.appendChild(statusBar);
                phoneScreen.appendChild(homeScreen);
                phoneScreen.appendChild(dock);
                phoneFrame.appendChild(phoneScreen);
                this.container.appendChild(phoneFrame);
                
                this.setupAppListeners();
                this.updateTime();
            }

            createStatusBar(phoneType) {
                const statusBar = document.createElement('div');
                statusBar.className = 'status-bar';
                
                const notch = document.createElement('div');
                notch.className = phoneType === 'iphone17' ? 'notch liquid-glass' : 'notch';
                
                statusBar.innerHTML = `
                    <div class="status-left">
                        <span class="time">9:41</span>
                    </div>
                    <div class="status-right">
                        <i class="fas fa-signal"></i>
                        <i class="fas fa-wifi"></i>
                        <i class="fas fa-battery-full"></i>
                    </div>
                `;
                
                if (phoneType.includes('iphone')) {
                    statusBar.appendChild(notch);
                }
                
                return statusBar;
            }

            createHomeScreen(phoneType) {
                const homeScreen = document.createElement('div');
                homeScreen.className = 'home-screen';
                
                const appGrid = document.createElement('div');
                appGrid.className = 'app-grid';
                
                const coreApps = this.getCoreApps(phoneType);
                
                coreApps.forEach(app => {
                    const appIcon = document.createElement('div');
                    appIcon.className = phoneType.includes('android') ? 'app-icon android' : 'app-icon';
                    appIcon.setAttribute('data-url', app.url);
                    appIcon.setAttribute('data-action', app.action || '');
                    
                    appIcon.innerHTML = `
                        <div class="app-icon-bg">
                            <i class="${app.icon}"></i>
                        </div>
                        <span class="app-name">${app.name}</span>
                    `;
                    
                    appGrid.appendChild(appIcon);
                });
                
                homeScreen.appendChild(appGrid);
                return homeScreen;
            }

            getCoreApps(phoneType) {
                const baseApps = [
                    { name: 'Settings', icon: 'fas fa-gear', action: 'settings' },
                    { name: 'App Store', icon: 'fas fa-bag-shopping', action: 'appstore' },
                    { name: 'Camera', icon: 'fas fa-camera', url: 'https://webcamtests.com' },
                    { name: 'Photos', icon: 'fas fa-images', url: 'https://photos.google.com' },
                    { name: 'Messages', icon: 'fas fa-message', url: 'https://messages.google.com' },
                    { name: 'Phone', icon: 'fas fa-phone', url: 'https://voice.google.com' },
                    { name: 'Mail', icon: 'fas fa-envelope', url: 'https://mail.google.com' },
                    { name: 'Calendar', icon: 'fas fa-calendar', url: 'https://calendar.google.com' },
                    { name: 'Notes', icon: 'fas fa-note-sticky', url: 'https://keep.google.com' },
                    { name: 'Maps', icon: 'fas fa-map', url: 'https://www.google.com/maps' },
                    { name: 'Weather', icon: 'fas fa-cloud-sun', url: 'https://weather.com' },
                    { name: 'Clock', icon: 'fas fa-clock', url: 'https://www.timeanddate.com' },
                    { name: 'Calculator', icon: 'fas fa-calculator', url: 'https://www.calculator.net' },
                    { name: 'Files', icon: 'fas fa-folder', url: 'https://drive.google.com' },
                    { name: 'Contacts', icon: 'fas fa-address-book', url: 'https://contacts.google.com' },
                    { name: 'Browser', icon: 'fas fa-globe', url: 'https://www.google.com' },
                    { name: 'Music', icon: 'fas fa-music', url: 'https://music.youtube.com' },
                    { name: 'Video', icon: 'fas fa-video', url: 'https://meet.google.com' },
                    { name: 'Voice', icon: 'fas fa-microphone', url: 'https://online-voice-recorder.com' },
                    { name: 'Wallet', icon: 'fas fa-wallet', url: 'https://pay.google.com' }
                ];

                const popularApps = [
                    ...this.apps.social.slice(0, 6),
                    ...this.apps.entertainment.slice(0, 4)
                ];

                return [...baseApps, ...popularApps];
            }

            createDock(phoneType) {
                const dock = document.createElement('div');
                dock.className = phoneType.includes('android') ? 'dock android' : 'dock';
                
                const dockApps = [
                    { icon: 'fas fa-phone', url: 'https://voice.google.com' },
                    { icon: 'fas fa-message', url: 'https://messages.google.com' },
                    { icon: 'fas fa-globe', url: 'https://www.google.com' },
                    { icon: 'fas fa-camera', url: 'https://webcamtests.com' }
                ];
                
                dockApps.forEach(app => {
                    const appIcon = document.createElement('div');
                    appIcon.className = phoneType.includes('android') ? 'app-icon android' : 'app-icon';
                    appIcon.setAttribute('data-url', app.url);
                    
                    appIcon.innerHTML = `
                        <div class="app-icon-bg">
                            <i class="${app.icon}"></i>
                        </div>
                    `;
                    
                    dock.appendChild(appIcon);
                });
                
                return dock;
            }

            setupAppListeners() {
                const appIcons = this.container.querySelectorAll('.app-icon');
                appIcons.forEach(icon => {
                    icon.addEventListener('click', () => {
                        const url = icon.getAttribute('data-url');
                        const action = icon.getAttribute('data-action');
                        
                        if (action === 'settings') {
                            this.openSettings();
                        } else if (action === 'appstore') {
                            this.openAppStore();
                        } else if (url) {
                            this.openApp(url);
                        }
                    });
                });
            }

            openApp(url) {
                const proxyUrl = getProxyUrl(url);
                const appView = document.createElement('div');
                appView.className = 'app-view';
                
                appView.innerHTML = `
                    <div class="app-header">
                        <button class="close-app">
                            <i class="fas fa-times"></i>
                        </button>
                        <span class="app-url">${url}</span>
                    </div>
                    <iframe src="${proxyUrl}" frameborder="0" allow="camera; microphone; geolocation; payment"></iframe>
                `;
                
                this.container.querySelector('.phone-screen').appendChild(appView);
                
                appView.querySelector('.close-app').addEventListener('click', () => {
                    appView.remove();
                });
            }

            openSettings() {
                const settingsView = document.createElement('div');
                settingsView.className = 'app-view';
                
                settingsView.innerHTML = `
                    <div class="app-header">
                        <button class="close-app">
                            <i class="fas fa-times"></i>
                        </button>
                        <span class="app-url">Settings</span>
                    </div>
                    <div class="settings-container">
                        <div class="settings-header">
                            <i class="fas fa-gear"></i>
                            <h2>Settings</h2>
                        </div>
                        
                        <div class="settings-section">
                            <div class="section-title">Appearance</div>
                            ${this.createSettingsItem('Theme', 'Choose your theme', 'fa-palette', true)}
                            ${this.createSettingsItem('Dark Mode', 'Enable dark mode', 'fa-moon', true)}
                            ${this.createSettingsItem('Wallpaper', 'Change wallpaper', 'fa-image', false)}
                            ${this.createSettingsItem('Icon Style', 'Customize icons', 'fa-icons', false)}
                            ${this.createSettingsItem('Font Size', 'Adjust text size', 'fa-text-height', false)}
                        </div>
                        
                        <div class="settings-section">
                            <div class="section-title">Display</div>
                            ${this.createSettingsItem('Brightness', 'Auto brightness', 'fa-sun', true)}
                            ${this.createSettingsItem('Night Shift', 'Reduce blue light', 'fa-moon', false)}
                            ${this.createSettingsItem('True Tone', 'Adaptive display', 'fa-adjust', true)}
                            ${this.createSettingsItem('Always On', 'Always-on display', 'fa-clock', false)}
                        </div>
                        
                        <div class="settings-section">
                            <div class="section-title">Sound & Haptics</div>
                            ${this.createSettingsItem('Ringtone', 'Choose ringtone', 'fa-bell', false)}
                            ${this.createSettingsItem('Vibration', 'Enable vibration', 'fa-mobile-screen', true)}
                            ${this.createSettingsItem('Silent Mode', 'Mute all sounds', 'fa-volume-mute', false)}
                            ${this.createSettingsItem('Haptic Feedback', 'Touch feedback', 'fa-hand-pointer', true)}
                        </div>
                        
                        <div class="settings-section">
                            <div class="section-title">Privacy & Security</div>
                            ${this.createSettingsItem('Face ID', 'Biometric unlock', 'fa-face-smile', true)}
                            ${this.createSettingsItem('Passcode', 'Set passcode', 'fa-lock', false)}
                            ${this.createSettingsItem('Location', 'Location services', 'fa-location-dot', true)}
                            ${this.createSettingsItem('Tracking', 'App tracking', 'fa-shield-halved', false)}
                            ${this.createSettingsItem('Permissions', 'App permissions', 'fa-key', false)}
                        </div>
                        
                        <div class="settings-section">
                            <div class="section-title">Battery</div>
                            ${this.createSettingsItem('Battery Health', 'Check battery', 'fa-battery-full', false)}
                            ${this.createSettingsItem('Low Power', 'Save battery', 'fa-battery-quarter', false)}
                            ${this.createSettingsItem('Optimized Charging', 'Smart charging', 'fa-bolt', true)}
                        </div>
                        
                        <div class="settings-section">
                            <div class="section-title">Network</div>
                            ${this.createSettingsItem('Wi-Fi', 'Wireless network', 'fa-wifi', true)}
                            ${this.createSettingsItem('Bluetooth', 'Bluetooth devices', 'fa-bluetooth', true)}
                            ${this.createSettingsItem('Cellular', 'Mobile data', 'fa-signal', true)}
                            ${this.createSettingsItem('Airplane Mode', 'Disable wireless', 'fa-plane', false)}
                            ${this.createSettingsItem('VPN', 'Virtual network', 'fa-shield', false)}
                        </div>
                        
                        <div class="settings-section">
                            <div class="section-title">Notifications</div>
                            ${this.createSettingsItem('Show Previews', 'Message previews', 'fa-eye', true)}
                            ${this.createSettingsItem('Badges', 'App badges', 'fa-circle-dot', true)}
                            ${this.createSettingsItem('Sounds', 'Notification sounds', 'fa-volume-high', true)}
                            ${this.createSettingsItem('Do Not Disturb', 'Silence notifications', 'fa-moon', false)}
                        </div>
                        
                        <div class="settings-section">
                            <div class="section-title">General</div>
                            ${this.createSettingsItem('About', 'Device information', 'fa-info-circle', false)}
                            ${this.createSettingsItem('Software Update', 'Check for updates', 'fa-download', false)}
                            ${this.createSettingsItem('Storage', 'Manage storage', 'fa-hard-drive', false)}
                            ${this.createSettingsItem('Language', 'Change language', 'fa-language', false)}
                            ${this.createSettingsItem('Keyboard', 'Keyboard settings', 'fa-keyboard', false)}
                            ${this.createSettingsItem('Date & Time', 'Set date and time', 'fa-calendar-days', false)}
                        </div>
                        
                        <div class="settings-section">
                            <div class="section-title">Accessibility</div>
                            ${this.createSettingsItem('VoiceOver', 'Screen reader', 'fa-volume-high', false)}
                            ${this.createSettingsItem('Zoom', 'Screen magnifier', 'fa-magnifying-glass-plus', false)}
                            ${this.createSettingsItem('Display', 'Visual settings', 'fa-eye', false)}
                            ${this.createSettingsItem('Hearing', 'Audio settings', 'fa-ear-listen', false)}
                        </div>
                        
                        <div class="settings-section">
                            <div class="section-title">Apps</div>
                            ${this.createSettingsItem('Default Apps', 'Set default apps', 'fa-star', false)}
                            ${this.createSettingsItem('App Library', 'Organize apps', 'fa-grid-2', false)}
                            ${this.createSettingsItem('Background App', 'Background refresh', 'fa-rotate', true)}
                        </div>
                    </div>
                `;
                
                this.container.querySelector('.phone-screen').appendChild(settingsView);
                
                settingsView.querySelector('.close-app').addEventListener('click', () => {
                    settingsView.remove();
                });

                settingsView.querySelectorAll('.switch input').forEach(toggle => {
                    toggle.addEventListener('change', (e) => {
                        console.log('Setting toggled:', e.target.checked);
                    });
                });
            }

            createSettingsItem(title, description, icon, hasToggle) {
                return `
                    <div class="settings-item">
                        <div class="settings-item-left">
                            <i class="fas ${icon}"></i>
                            <div class="settings-item-info">
                                <h4>${title}</h4>
                                <p>${description}</p>
                            </div>
                        </div>
                        ${hasToggle ? `
                            <label class="switch">
                                <input type="checkbox" ${Math.random() > 0.5 ? 'checked' : ''}>
                                <span class="slider"></span>
                            </label>
                        ` : '<i class="fas fa-chevron-right" style="color: rgba(137, 207, 240, 0.5);"></i>'}
                    </div>
                `;
            }

            openAppStore() {
                const appStoreView = document.createElement('div');
                appStoreView.className = 'app-view';
                
                const allApps = [
                    ...this.apps.social,
                    ...this.apps.entertainment,
                    ...this.apps.productivity,
                    ...this.apps.shopping,
                    ...this.apps.games,
                    ...this.apps.utilities,
                    ...this.apps.news,
                    ...this.apps.dating,
                    ...this.apps.education
                ];
                
                appStoreView.innerHTML = `
                    <div class="app-header">
                        <button class="close-app">
                            <i class="fas fa-times"></i>
                        </button>
                        <span class="app-url">App Store</span>
                    </div>
                    <div class="appstore-container">
                        <div class="appstore-header">
                            <i class="fas fa-bag-shopping"></i>
                            <h2>App Store</h2>
                        </div>
                        
                        <div class="appstore-section">
                            <div class="section-title">Social Media</div>
                            <div class="app-store-grid">
                                ${this.apps.social.map(app => this.createStoreApp(app)).join('')}
                            </div>
                        </div>
                        
                        <div class="appstore-section">
                            <div class="section-title">Entertainment</div>
                            <div class="app-store-grid">
                                ${this.apps.entertainment.map(app => this.createStoreApp(app)).join('')}
                            </div>
                        </div>
                        
                        <div class="appstore-section">
                            <div class="section-title">Productivity</div>
                            <div class="app-store-grid">
                                ${this.apps.productivity.map(app => this.createStoreApp(app)).join('')}
                            </div>
                        </div>
                        
                        <div class="appstore-section">
                            <div class="section-title">Shopping</div>
                            <div class="app-store-grid">
                                ${this.apps.shopping.map(app => this.createStoreApp(app)).join('')}
                            </div>
                        </div>
                        
                        <div class="appstore-section">
                            <div class="section-title">Games</div>
                            <div class="app-store-grid">
                                ${this.apps.games.map(app => this.createStoreApp(app)).join('')}
                            </div>
                        </div>
                        
                        <div class="appstore-section">
                            <div class="section-title">Utilities</div>
                            <div class="app-store-grid">
                                ${this.apps.utilities.map(app => this.createStoreApp(app)).join('')}
                            </div>
                        </div>
                        
                        <div class="appstore-section">
                            <div class="section-title">News</div>
                            <div class="app-store-grid">
                                ${this.apps.news.map(app => this.createStoreApp(app)).join('')}
                            </div>
                        </div>
                        
                        <div class="appstore-section">
                            <div class="section-title">Dating</div>
                            <div class="app-store-grid">
                                ${this.apps.dating.map(app => this.createStoreApp(app)).join('')}
                            </div>
                        </div>
                        
                        <div class="appstore-section">
                            <div class="section-title">Education</div>
                            <div class="app-store-grid">
                                ${this.apps.education.map(app => this.createStoreApp(app)).join('')}
                            </div>
                        </div>
                    </div>
                `;
                
                this.container.querySelector('.phone-screen').appendChild(appStoreView);
                
                appStoreView.querySelector('.close-app').addEventListener('click', () => {
                    appStoreView.remove();
                });

                appStoreView.querySelectorAll('.store-app').forEach(app => {
                    app.addEventListener('click', () => {
                        const url = app.getAttribute('data-url');
                        appStoreView.remove();
                        this.openApp(url);
                    });
                });
            }

            createStoreApp(app) {
                return `
                    <div class="store-app" data-url="${app.url}">
                        <div class="store-app-icon">
                            <i class="${app.icon}"></i>
                        </div>
                        <div class="store-app-name">${app.name}</div>
                        <div class="store-app-category">${app.category}</div>
                    </div>
                `;
            }

            updateTime() {
                setInterval(() => {
                    const now = new Date();
                    const timeString = now.toLocaleTimeString('en-US', { 
                        hour: 'numeric', 
                        minute: '2-digit',
                        hour12: false 
                    });
                    
                    const timeElements = this.container.querySelectorAll('.time');
                    timeElements.forEach(el => {
                        el.textContent = timeString;
                    });
                }, 1000);
            }
        }

        function navigateToHome() {
            window.navigationManager.navigateTo('homepage');
        }

        function navigateToSelection() {
            window.navigationManager.navigateTo('phoneSelection');
        }

        document.addEventListener('DOMContentLoaded', () => {
            console.log('%c NebulaOS Ultimate v2.0.0 ', 'background: #89CFF0; color: #000; font-size: 20px; font-weight: bold; padding: 10px;');
            
            window.particleSystem = new ParticleSystem();
            window.navigationManager = new NavigationManager();
            window.phoneLoader = new PhoneLoader();
        });
    </script>
</body>
</html>
